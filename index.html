<!DOCTYPE html>
<html lang="de">
<head>
  <!-- Google Ads -->
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4852698472752437" crossorigin="anonymous"></script>

  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />

  <title>Spritkostenrechner - Benzin & Fahrtkosten in Deutschland berechnen</title>
  <meta name="description" content="Kostenloser Spritkosten Rechner f√ºr Deutschland, √ñsterreich & Schweiz. Berechne Benzinkosten, Fahrtkosten, Mautgeb√ºhren & Spritverbrauch pro km. Sofort Ergebnisse mit interaktiver Karte." />
  <meta name="keywords" content="Spritkosten Rechner, Benzinkosten berechnen, Fahrtkosten berechnen, Spritpreis Deutschland, Spritkosten pro km, Benzinpreis √ñsterreich, Spritkosten Schweiz" />
  <meta name="author" content="Spritkosten Rechner" />
  <meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1" />
  <meta name="language" content="German" />
  <meta name="revisit-after" content="7 days" />

  <!-- Canonical + hreflang (DE ‚Üî EN) -->
  <link rel="canonical" href="https://spritkostenrechner.de/" />
  <link rel="alternate" hreflang="de" href="https://spritkostenrechner.de/" />
  <link rel="alternate" hreflang="de-AT" href="https://spritkostenrechner.de/at" />
  <link rel="alternate" hreflang="de-CH" href="https://spritkostenrechner.de/ch" />
  <link rel="alternate" hreflang="en" href="https://petrolcostcalculator.com/" />
  <link rel="alternate" hreflang="x-default" href="https://petrolcostcalculator.com/" />

  <!-- OG / Twitter -->
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://spritkostenrechner.de/" />
  <meta property="og:title" content="Spritkosten Rechner - Fahrtkosten schnell berechnen" />
  <meta property="og:description" content="Kostenloser Spritkosten Rechner mit Mautsch√§tzung f√ºr 40+ L√§nder. Berechne Benzinpreise pro km, Betriebskosten & Reiseausgaben sofort." />
  <meta property="og:image" content="https://spritkostenrechner.de/og-image.png" />
  <meta property="og:image:width" content="1200" />
  <meta property="og:image:height" content="630" />
  <meta property="og:locale" content="de_DE" />

  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:site" content="@spritkostrechner" />
  <meta name="twitter:title" content="Kostenloser Spritkosten Rechner | Deutschland, √ñsterreich & Schweiz" />
  <meta name="twitter:description" content="Berechne Spritkosten, Benzinpreise & Fahrtausgaben. Funktioniert in 40+ L√§ndern mit automatischer Mautsch√§tzung & interaktiver Karte." />
  <meta name="twitter:image" content="https://spritkostenrechner.de/og-image.png" />

  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <meta name="apple-mobile-web-app-title" content="Spritrechner" />
  <meta name="theme-color" content="#0ea5a3" />

  <!-- Icons -->
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
  <link rel="manifest" href="/site.webmanifest" />

  <!-- Leaflet -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />

  <!-- Header font like EN -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@600;700;800&display=swap" rel="stylesheet">

  <style>
    *{box-sizing:border-box;}

    :root{
      --bg1:#0f172a;
      --bg2:#e9eef5;
      --card:#ffffff;
      --muted:#4b5563;
      --text:#0b1220;
      --accent:#0ea5a3;
      --accent-2:#4f46e5;
      --button-h:48px;
      --maxw:1000px;
    }

    /* ‚úÖ Background 100% seam-free (mobile-safe) */
    html, body { width:100%; min-height:100%; }
    body{
      margin:0;
      font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, Arial;
      color:var(--text);
      background: transparent;
      min-height:100vh;
      position:relative;
      overflow-x:hidden;
    }
    body::before{
      content:"";
      position:fixed;
      inset:0;
      z-index:-1;
      background: linear-gradient(180deg, var(--bg1) 0%, var(--bg2) 100%);
    }

    /* ‚úÖ Full width header like EN */
    .site-header{
      position:sticky;
      top:0;
      z-index:1000;
      width:100%;
      background:#fff;
      border-bottom:1px solid rgba(15,23,42,0.06);
    }
    .header-inner{
      width:100%;
      max-width:none;
      margin:0;
      padding:10px 18px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
    }

    .logo-title{
      display:flex;
      align-items:center;
      gap:12px;
      text-decoration:none;
      color:inherit;
      flex:0 0 auto;
      min-width:0;
    }
    .logo-title:hover{opacity:.88;}
    .logo-title img{
      height:54px;
      width:auto;
      display:block;
    }
    .site-title{
      font-family:'Poppins', Inter, system-ui, -apple-system, "Segoe UI", Roboto, Arial;
      font-weight:700;
      font-size:18px;
      white-space:nowrap;
      letter-spacing:0.2px;
      color:var(--text);
    }

    .tabs{
      display:flex;
      gap:8px;
      margin-left:auto;
      flex:0 0 auto;
      align-items:center;
    }
    .tabs button{
      background:transparent;
      border:1px solid transparent;
      color:var(--muted);
      padding:.6rem 1rem;
      border-radius:.6rem;
      cursor:pointer;
      font-weight:800;
      font-size:.95rem;
      height:var(--button-h);
      white-space:nowrap;
    }
    .tabs button[aria-selected="true"]{
      background:linear-gradient(90deg,var(--accent),var(--accent-2));
      color:#fff;
    }

    /* EN switch */
    .lang-link{
      font-weight:800;
      text-decoration:none;
      color:var(--accent-2);
      border:1px solid rgba(79,70,229,0.15);
      background:#eef2ff;
      padding:.55rem .8rem;
      border-radius:.6rem;
      height:var(--button-h);
      display:inline-flex;
      align-items:center;
      white-space:nowrap;
    }

    /* Centered content like EN */
    .page-container{
      max-width:var(--maxw);
      margin:0 auto;
      padding:0 12px;
    }

    /* ‚úÖ consistent spacing between blocks (fix missing gaps) */
    .page-container > *{ margin-top:18px; }
    .page-container > *:first-child{ margin-top:14px; }
    main > section{ margin-top:18px; }
    main > section:first-child{ margin-top:0; }

    h2{font-size:1.1rem;margin:16px 0 12px 0}
    p{line-height:1.7;margin:12px 0;color:var(--text)}
    a{color:var(--accent);text-decoration:none}
    a:hover{text-decoration:underline}

    .card{
      background:var(--card);
      border-radius:16px;
      padding:16px;
      box-shadow:0 12px 30px rgba(0,0,0,.08);
      border:1px solid rgba(15,23,42,0.05);
      width:100%;
      overflow:hidden;
    }

    .layout{
      display:grid;
      grid-template-columns:minmax(0,420px) minmax(0,1fr);
      gap:16px;
      align-items:start;
      width:100%;
    }

    label{
      display:block;
      margin:.5rem 0 .25rem 0;
      font-size:.9rem;
      color:var(--muted);
      font-weight:600;
    }
    input[type="number"], input[type="text"], select{
      width:100%;
      padding:.6rem .75rem;
      border-radius:8px;
      border:1px solid rgba(15,23,42,0.10);
      background:transparent;
      color:var(--text);
      outline:none;
      font-size:1rem;
      margin-top:.25rem;
    }

    .km-row{display:flex;gap:8px;align-items:center;flex-wrap:nowrap}
    .km-row .km-input{flex:1;min-width:0}

    .spinner{display:flex;flex-direction:column;gap:6px}
    .spinner button{
      width:44px;height:44px;border-radius:8px;border:none;
      background:linear-gradient(90deg,var(--accent),var(--accent-2));
      color:#fff;font-weight:900;font-size:18px;cursor:pointer;
      display:inline-flex;align-items:center;justify-content:center
    }

    .big-action{display:flex;gap:10px;margin-top:12px;flex-wrap:wrap}
    .btn{
      flex:1;
      height:var(--button-h);
      border-radius:10px;
      border:none;
      cursor:pointer;
      font-weight:800;
      background:linear-gradient(90deg,var(--accent),var(--accent-2));
      color:#fff;
      font-size:1rem;
      min-width:140px
    }
    .btn.secondary{
      background:#eef2ff;
      color:var(--accent-2);
      border:1px solid rgba(79,70,229,0.12)
    }
    .btn.large{font-size:1.05rem;padding:0 14px;height:54px}

    .small{font-size:.9rem;color:var(--muted)}
    .error{color:#e53e3e}

    .price-table{display:flex;gap:8px;margin-top:8px;flex-wrap:wrap}
    .price-card{
      flex:1;min-width:140px;padding:8px;border-radius:8px;background:#fafafa;
      border:1px solid rgba(15,23,42,0.05);text-align:center
    }
    .price-card strong{display:block;font-size:1.05rem;color:var(--accent-2);margin-top:6px}

    .resultbox{
      margin-top:12px;
      padding:12px;
      border-radius:8px;
      background:linear-gradient(180deg,#ffffff,#fbfdff);
      border:1px solid rgba(15,23,42,0.06)
    }
    .result-row{
      display:flex;justify-content:space-between;align-items:center;
      padding:6px 0;border-bottom:1px dashed rgba(15,23,42,0.10);gap:8px
    }
    .result-row:last-child{border-bottom:0}
    .result-key{color:var(--muted);font-size:.95rem}
    .result-val{font-weight:900;color:var(--accent-2)}

    #map{
      width:100%;
      height:360px;
      min-height:280px;
      border-radius:8px;
      border:1px solid rgba(15,23,42,0.10);
      background:#fff;
    }

    /* Quick FAQ like EN */
    .faq-item{margin:10px 0}
    .faq-item summary{
      cursor:pointer;
      font-weight:800;
      color:var(--accent-2);
      padding:10px;
      border-radius:8px;
      background:rgba(79,70,229,0.06)
    }
    .faq-item summary:hover{background:rgba(79,70,229,0.12)}
    .faq-item p{margin:10px 0 0 0;line-height:1.6}

    /* Countries block style like EN (content DE bleibt) */
    .countries-grid{
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(220px,1fr));
      gap:12px;margin-top:12px
    }
    .country-card{
      background:#f9fafb;border-radius:8px;padding:12px;border:1px solid rgba(15,23,42,0.06);
      transition:box-shadow .2s ease
    }
    .country-card:hover{box-shadow:0 4px 12px rgba(15,23,42,0.10)}
    .country-card h3{margin:0 0 8px 0;font-size:1rem;color:var(--accent-2)}
    .country-card p{margin:0 0 8px 0;font-size:.9rem}

    /* Ads */
    .ad-block{margin-top:18px;}

    /* Mobile */
    @media(max-width:980px){
      .layout{grid-template-columns:1fr}
      #map{height:260px}
      .spinner button{width:38px;height:38px}
    }
    @media(max-width:720px){
      .header-inner{padding:10px 12px}
      .site-title{
        max-width:180px;
        overflow:hidden;
        text-overflow:ellipsis;
      }
      .tabs button{padding:.5rem .7rem;height:42px;font-size:.9rem}
      .lang-link{height:42px;padding:.5rem .7rem}
      .big-action{flex-direction:column}
      .btn{width:100%}
      #map{height:240px}
    }
    @media(max-width:420px){
      .site-title{display:none;}
    }

    /* ‚úÖ Footer bottom text: ALWAYS BLACK + readable */
    footer, footer *{
      color:#000 !important;
      opacity:1 !important;
    }
    footer{
      padding:18px 0 30px 0;
    }
    footer a:hover{ text-decoration:underline; }
  </style>
</head>

<body>

  <!-- ‚úÖ FULL WIDTH HEADER -->
  <header class="site-header">
    <div class="header-inner">
      <a href="index.html" class="logo-title">
        <img src="/logo.png" alt="Spritkostenrechner Logo" />
        <span class="site-title">Spritkostenrechner ‚Äì Benzin & Fahrtkosten berechnen</span>
      </a>

      <nav class="tabs" role="tablist" aria-label="Main tabs">
        <button role="tab" data-target="sprit" aria-selected="true">Spritkosten</button>
        <button role="tab" data-target="calc" aria-selected="false">Taschenrechner</button>
        <a class="lang-link" href="https://petrolcostcalculator.com/" hreflang="en" lang="en" title="English">EN</a>
      </nav>
    </div>
  </header>

  <div class="page-container">

    <!-- Ad 1 -->
    <div class="ad-block">
      <ins class="adsbygoogle"
           style="display:block"
           data-ad-client="ca-pub-4852698472752437"
           data-ad-slot="1111111111"
           data-ad-format="auto"
           data-full-width-responsive="true"></ins>
      <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
    </div>

    <!-- Intro (DE Content bleibt) -->
    <section class="card intro-section" aria-label="Spritkosten Rechner Einf√ºhrung">
      <h2>Kostenloser Spritkosten Rechner - Fahrtbudget planen</h2>
      <p>
        Unser <strong>Spritkosten Rechner</strong> hilft dir, die genauen Kosten deiner Reise zu kalkulieren.
        Egal ob Roadtrip durch Deutschland, √ñsterreich, die Schweiz oder dar√ºber hinaus ‚Äì gib einfach Entfernung,
        Fahrzeugverbrauch und Benzinpreis ein und erhalte sofort eine detaillierte Aufschl√ºsselung von Spritkosten,
        Mautgeb√ºhren, Betriebskosten und Kosten pro Person.
      </p>
      <p><strong>Warum unser Benzinkosten Rechner?</strong></p>
      <ul style="margin:12px 0 0 18px; padding:0; line-height:1.6; color:var(--text)">
        <li><strong>Funktioniert √ºberall:</strong> Automatische Landerkennung mit Benzinpreisen f√ºr 40+ L√§nder</li>
        <li><strong>Genaue Mautkosten:</strong> Mautsch√§tzung f√ºr Motorways, Vignetten & Stra√üengeb√ºhren pro Region</li>
        <li><strong>Komplette √úbersicht:</strong> Spritkosten + Verschlei√ü + Versicherung + Abschreibung + Maut</li>
        <li><strong>Kosten teilen:</strong> Fahrtausgaben fair unter Mitfahrern aufteilen</li>
        <li><strong>Interaktive Karte:</strong> Visuelle Routenplanung mit Start-/Zielmarkierungen</li>
      </ul>

      <div class="publisher-content" style="margin-top:14px">
        <h3 style="margin:10px 0 8px 0; font-size:1rem; color:var(--accent-2)">So berechnest du deine echten Fahrtkosten</h3>
        <p>
          Neben dem reinen Spritpreis spielen auch Maut, Verschlei√ü, Wartung und Versicherung eine wichtige Rolle.
          Gerade bei l√§ngeren Strecken entstehen oft deutlich h√∂here Kosten als erwartet.
        </p>
        <p>
          Mit Spritkosten-Check.de kannst du deine Spritkosten realistisch berechnen und siehst sofort,
          wie teuer deine Fahrt wirklich ist ‚Äì pro Kilometer und pro Person.
        </p>
        <p>
          Das ist ideal f√ºr Fahrgemeinschaften, Urlaubsfahrten und die Planung von l√§ngeren Roadtrips.
        </p>
      </div>
    </section>

    <main aria-label="Main content">

      <section id="sprit" class="card" aria-hidden="false">
        <!-- Ad 2 -->
        <div class="ad-block">
          <ins class="adsbygoogle"
               style="display:block"
               data-ad-client="ca-pub-4852698472752437"
               data-ad-slot="2222222222"
               data-ad-format="auto"
               data-full-width-responsive="true"></ins>
          <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
        </div>

        <div class="layout">
          <div>
            <h2 style="margin:0 0 8px 0;font-size:1rem">Eingaben</h2>

            <label for="km">Entfernung (km) ‚Äî oder berechne von / nach</label>
            <div class="km-row">
              <input id="km" class="km-input" type="number" inputmode="decimal" min="0" step="0.1" placeholder="z. B. 120,5" />
              <div class="spinner" title="Entfernung erh√∂hen / verringern">
                <button id="km-inc" aria-label="Entfernung erh√∂hen">‚ñ≤</button>
                <button id="km-dec" aria-label="Entfernung verringern">‚ñº</button>
              </div>
            </div>

            <div style="margin-top:12px">
              <label for="place-from">Oder: Start (Stadt, Land)</label>
              <input id="place-from" type="text" placeholder="z. B. Berlin, Deutschland" />
              <label for="place-to" style="margin-top:10px">Ziel (Stadt, Land)</label>
              <input id="place-to" type="text" placeholder="z. B. M√ºnchen, Deutschland" />

              <div class="map-controls" style="margin-top:10px;display:flex;gap:8px;flex-wrap:wrap">
                <button id="btn-geocode" class="btn secondary">Entfernung berechnen</button>
                <button id="btn-clearmap" class="btn secondary">Karte zur√ºcksetzen</button>
              </div>
              <div class="small">Die Entfernung wird per Nominatim (OpenStreetMap) ermittelt. Kartenkacheln: OpenStreetMap.</div>
            </div>

            <label for="fuel-type" style="margin-top:12px">Kraftstofftyp</label>
            <select id="fuel-type" aria-label="Kraftstofftyp">
              <option value="super95">Super 95</option>
              <option value="e10">E10</option>
              <option value="diesel">Diesel</option>
            </select>

            <label for="verbrauch" style="margin-top:12px">Verbrauch (L/100 km)</label>
            <input id="verbrauch" type="number" inputmode="decimal" min="0" step="0.1" value="7.5" placeholder="z. B. 7,5" />

            <div style="display:flex;gap:8px;align-items:flex-start;margin-top:8px;flex-wrap:wrap">
              <div style="flex:1;min-width:240px">
                <label for="preis">Preis pro Liter (‚Ç¨)</label>
                <input id="preis" type="number" inputmode="decimal" min="0" step="0.01" placeholder="z. B. 1,65" />
                <div id="price-info" class="small" style="margin-top:4px;min-height:18px"></div>
              </div>
              <div style="width:180px;min-width:180px">
                <label style="visibility:hidden">Reset</label>
                <button id="btn-reset-price" class="btn secondary" style="width:100%" title="Zur√ºck zum Standardpreis">Zur√ºcksetzen</button>
              </div>
            </div>

            <div class="price-table" aria-hidden="false">
              <div class="price-card">
                <div class="small">√ò Super 95</div>
                <strong id="avg-super">‚Äî ‚Ç¨</strong>
              </div>
              <div class="price-card">
                <div class="small">√ò E10</div>
                <strong id="avg-e10">‚Äî ‚Ç¨</strong>
              </div>
              <div class="price-card">
                <div class="small">√ò Diesel</div>
                <strong id="avg-diesel">‚Äî ‚Ç¨</strong>
              </div>
            </div>

            <label for="personen" style="margin-top:12px">Personen (inkl. Fahrer)</label>
            <input id="personen" type="number" min="1" step="1" value="1" />

            <div class="big-action">
              <button id="calc-sprit" class="btn large">Berechnen</button>
              <button id="reset-sprit" class="btn secondary large">Zur√ºcksetzen</button>
            </div>

            <div class="resultbox" aria-live="polite" aria-label="Ergebnisse">
              <div class="result-row"><div class="result-key">Spritkosten</div><div class="result-val" id="cost-fuel">0,00 ‚Ç¨</div></div>
              <div class="result-row"><div class="result-key">Laufende Kosten inkl. Maut (gesch√§tzt)</div><div class="result-val" id="cost-running">0,00 ‚Ç¨</div></div>
              <div class="result-row"><div class="result-key">Gesamtkosten</div><div class="result-val" id="cost-total">0,00 ‚Ç¨</div></div>
              <div class="result-row"><div class="result-key">Pro Person</div><div class="result-val" id="cost-person">0,00 ‚Ç¨</div></div>
              <div class="result-row"><div class="result-key">Ben√∂tigte Liter</div><div class="result-val" id="liters">0,00 L</div></div>
              <div class="result-row"><div class="result-key">Durchschnitt (‚Ç¨/100 km)</div><div class="result-val" id="avg100">0,00 ‚Ç¨ /100km</div></div>
              <div class="result-row"><div class="result-key small">Gesch√§tzte laufende Kosten /100 km (inkl. Maut)</div><div class="result-val small" id="running-est">‚Äî ‚Ç¨ /100km</div></div>
              <div style="margin-top:8px;color:var(--muted);font-size:.85rem">
                Laufende Kosten enthalten: Verschlei√ü, Wartung, Versicherung, Reifen, Abschreibung, Steuern und l√§nderspezifische Maut-Sch√§tzung (Vignetten, Streckengeb√ºhren).
              </div>
            </div>
          </div>

          <div>
            <h2 style="margin:0 0 8px 0;font-size:1rem">Karte & Entfernung</h2>
            <div id="map"></div>
            <div style="margin-top:8px" class="small">
              Klicke ‚ÄûEntfernung berechnen‚Äú, um Start/Ziel zu suchen. Maut wird automatisch l√§nderspezifisch gesch√§tzt (Vignetten, Streckengeb√ºhren).
            </div>
            <div id="toll-info" class="small" style="margin-top:6px"></div>
          </div>
        </div>
      </section>

      <section id="calc" class="card" aria-hidden="true" style="display:none">
        <h2>Taschenrechner</h2>
        <label for="zahl1">Zahl 1</label>
        <input id="zahl1" type="number" inputmode="decimal" placeholder="Zahl 1" />
        <label for="zahl2">Zahl 2</label>
        <input id="zahl2" type="number" inputmode="decimal" placeholder="Zahl 2" />

        <div style="display:grid;grid-template-columns:1fr 1fr;gap:8px;margin-top:10px;max-width:240px">
          <button data-op="+" class="btn" style="height:44px;font-size:1.1rem">+</button>
          <button data-op="-" class="btn" style="height:44px;font-size:1.1rem">‚àí</button>
          <button data-op="*" class="btn" style="height:44px;font-size:1.1rem">√ó</button>
          <button data-op="/" class="btn" style="height:44px;font-size:1.1rem">√∑</button>
        </div>

        <p style="margin-top:12px" class="small">Ergebnis: <strong id="erg">‚Äì</strong></p>
      </section>

    </main>

    <!-- ‚úÖ Start-FAQ: nur 4 Fragen -->
    <section class="card faq-section" aria-label="Spritkosten Rechner - FAQ">
      <h2>Spritkosten Rechner - FAQ</h2>

      <details class="faq-item" itemscope itemprop="mainEntity" itemtype="https://schema.org/Question">
        <summary itemprop="name">Wie wird der Fahrzeugverbrauch gemessen?</summary>
        <div itemprop="acceptedAnswer" itemscope itemtype="https://schema.org/Answer">
          <p itemprop="text">Der Fahrzeugverbrauch wird in Litern pro 100 Kilometern gemessen (L/100 km). Wenn dein Auto 7,5 Liter pro 100 km verbraucht, gib 7,5 ein. Du findest diesen Wert in der Bedienungsanleitung oder kannst ihn sch√§tzen (Kleinwagen: 5‚Äì7 L/100 km, gr√∂√üere Fahrzeuge: 8‚Äì12 L/100 km).</p>
        </div>
      </details>

      <details class="faq-item" itemscope itemprop="mainEntity" itemtype="https://schema.org/Question">
        <summary itemprop="name">Wo finde ich aktuelle Benzinpreise?</summary>
        <div itemprop="acceptedAnswer" itemscope itemtype="https://schema.org/Answer">
          <p itemprop="text">Der Rechner nutzt Durchschnittspreise f√ºr dein erkanntes Land. F√ºr aktuelle Preise in Deutschland nutze z. B. den ADAC-Spritpreismonitor oder Tankstellen-Apps. √ñsterreich/Schweiz: regionale Tankstellen-Apps und Automobilclubs.</p>
        </div>
      </details>

      <details class="faq-item" itemscope itemprop="mainEntity" itemtype="https://schema.org/Question">
        <summary itemprop="name">Was sind Betriebskosten und wie werden diese berechnet?</summary>
        <div itemprop="acceptedAnswer" itemscope itemtype="https://schema.org/Answer">
          <p itemprop="text">Betriebskosten umfassen Sprit, Wartung, Versicherung, Reifen, Abschreibung und Steuern. Wir nutzen eine einfache, realistische Sch√§tzung pro 100 km und addieren (wenn verf√ºgbar) die Maut-Sch√§tzung.</p>
        </div>
      </details>

      <details class="faq-item" itemscope itemprop="mainEntity" itemtype="https://schema.org/Question">
        <summary itemprop="name">Wie genau sind die Mautkostensch√§tzungen?</summary>
        <div itemprop="acceptedAnswer" itemscope itemtype="https://schema.org/Answer">
          <p itemprop="text">Mautsch√§tzungen basieren auf Durchschnittswerten (Vignetten/Streckengeb√ºhren) und mehreren L√§nder-Samples entlang der Verbindung. Sie sind ideal zum Budgetieren, k√∂nnen aber je nach Route/Fahrzeugklasse abweichen.</p>
        </div>
      </details>

      <div style="margin-top:12px;display:flex;gap:10px;flex-wrap:wrap">
        <a class="btn secondary" href="faq.html" style="display:inline-flex;align-items:center;justify-content:center;text-decoration:none">
          Mehr Fragen im FAQ
        </a>
      </div>
    </section>

    <!-- Countries (DE Content, EN Look) -->
    <section class="card countries-section" aria-label="Spritkosten Rechner nach Land">
      <h2>Spritkosten Rechner nach Land</h2>
      <p class="small" style="margin:0 0 10px 0">Unser Benzinkosten Rechner funktioniert in diesen beliebten Regionen:</p>

      <div class="countries-grid">
        <div class="country-card">
          <h3>Deutschland</h3>
          <p>Berechne Spritkosten f√ºr Roadtrips durch Deutschland. Inkl. Mautsch√§tzung f√ºr Bundesl√§nder-Geb√ºhren.</p>
          <ul class="small" style="padding-left:16px;margin:8px 0">
            <li>ADAC Spritpreise</li>
            <li>Mautkosten pro Region</li>
            <li>km zu ‚Ç¨/100 km</li>
          </ul>
        </div>

        <div class="country-card">
          <h3>√ñsterreich</h3>
          <p>Fahrtkosten f√ºr √ñsterreich berechnen mit Benzinpreisen und Vignetten-Geb√ºhren.</p>
          <ul class="small" style="padding-left:16px;margin:8px 0">
            <li>OMV Benzinpreise</li>
            <li>Vignetten & Maut</li>
            <li>Alpenp√§sse</li>
          </ul>
        </div>

        <div class="country-card">
          <h3>Schweiz</h3>
          <p>Spritkosten f√ºr Schweizer Roadtrips mit Benzin- und Mautgeb√ºhren-Sch√§tzungen.</p>
          <ul class="small" style="padding-left:16px;margin:8px 0">
            <li>Schweizer Tankstellen-Preise</li>
            <li>Vignetten & Geb√ºhren</li>
            <li>Kilometerkosten</li>
          </ul>
        </div>

        <div class="country-card">
          <h3>Frankreich</h3>
          <p>Fahrtkosten f√ºr Frankreich kalkulieren mit Autoroute-Maut und Benzinpreisen.</p>
          <ul class="small" style="padding-left:16px;margin:8px 0">
            <li>Franz√∂sische Benzinpreise</li>
            <li>Autoroute Mautgeb√ºhren</li>
            <li>Fahrtbudget planen</li>
          </ul>
        </div>

        <div class="country-card">
          <h3>Europa & Weltweit</h3>
          <p>Fahrtkosten f√ºr europ√§ische Roadtrips mit Vignetten- und Maut-Sch√§tzungen f√ºr 40+ L√§nder.</p>
          <ul class="small" style="padding-left:16px;margin:8px 0">
            <li>30+ L√§nder Daten</li>
            <li>Vignetten-Kostenrechner</li>
            <li>Auto-Erkennung</li>
          </ul>
        </div>
      </div>
    </section>

    <!-- Ad 3 -->
    <div class="ad-block">
      <ins class="adsbygoogle"
           style="display:block"
           data-ad-client="ca-pub-4852698472752437"
           data-ad-slot="3333333333"
           data-ad-format="auto"
           data-full-width-responsive="true"></ins>
      <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
    </div>

    <!-- Footer (black readable) -->
    <footer class="small">
      Internet f√ºr Karten/Geocoding erforderlich. Preise k√∂nnen optional √ºber einen eigenen HTTPS-Endpoint geladen werden.
      <span style="margin-left:10px">|</span>
      <a href="faq.html">FAQ</a> <span style="opacity:.75">|</span>
      <a href="contact.html">Kontakt</a> <span style="opacity:.75">|</span>
      <a href="impressum.html">Impressum</a> <span style="opacity:.75">|</span>
      <a href="datenschutz.html">Datenschutz</a>

      <div style="text-align:center;margin-top:14px">
        üá©üá™ F√ºr Deutschland:
        <a href="https://spritkosten-check.de">Spritkosten-Check.de</a>
        &nbsp;&nbsp;|&nbsp;&nbsp;
        üåç International:
        <a href="https://petrolcostcalculator.com">PetrolCostCalculator.com</a>
      </div>

      <div style="text-align:center;margin-top:10px">
        <a href="/fahrtkosten-rechner.html">Fahrtkosten Rechner</a> |
        <a href="/fuel-cost-calculator.html">Fuel Cost Calculator</a>
        <span style="opacity:.75">|</span>
        <a href="/ratgeber.html">Spritkosten Ratgeber</a>
      </div>
    </footer>

  </div><!-- /.page-container -->

  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const MAPBOX_API_KEY = ''; // Optional: Mapbox API key

      // Tabs
      document.querySelectorAll('.tabs [role="tab"]').forEach(btn => {
        btn.addEventListener('click', () => {
          document.querySelectorAll('.tabs [role="tab"]').forEach(b => b.setAttribute('aria-selected','false'));
          btn.setAttribute('aria-selected','true');
          const target = btn.dataset.target;
          document.querySelectorAll('main > section').forEach(s => {
            s.style.display = (s.id === target) ? '' : 'none';
            s.setAttribute('aria-hidden', s.id === target ? 'false' : 'true');
          });
        });
      });

      const parse = v => (v === '' || v == null) ? NaN : Number(String(v).replace(',', '.'));
      const fmt = n => (Number.isFinite(n) ? Number.parseFloat(n.toFixed(2)).toLocaleString('de-DE') : '0,00');

      // DOM
      const kmEl = document.getElementById('km');
      const verbEl = document.getElementById('verbrauch');
      const priceEl = document.getElementById('preis');
      const personsEl = document.getElementById('personen');
      const fuelTypeEl = document.getElementById('fuel-type');

      const litersEl = document.getElementById('liters');
      const costFuelEl = document.getElementById('cost-fuel');
      const costRunningEl = document.getElementById('cost-running');
      const costTotalEl = document.getElementById('cost-total');
      const costPersonEl = document.getElementById('cost-person');
      const avg100El = document.getElementById('avg100');
      const runningEstEl = document.getElementById('running-est');

      const avgSuperEl = document.getElementById('avg-super');
      const avgE10El = document.getElementById('avg-e10');
      const avgDieselEl = document.getElementById('avg-diesel');
      const tollInfoEl = document.getElementById('toll-info');
      const priceInfoEl = document.getElementById('price-info');
      const placeFromEl = document.getElementById('place-from');
      const placeToEl = document.getElementById('place-to');

      // Country-based default fuel prices (EUR per liter)
      const countryFuelPrices = {
        de: { super95:1.80, e10:1.77, diesel:1.65, name:'Deutschland' },
        at: { super95:1.75, e10:1.72, diesel:1.60, name:'√ñsterreich' },
        ch: { super95:1.95, e10:1.92, diesel:1.85, name:'Schweiz' },
        fr: { super95:1.85, e10:1.82, diesel:1.70, name:'Frankreich' },
        it: { super95:1.90, e10:1.87, diesel:1.75, name:'Italien' },
        es: { super95:1.75, e10:1.72, diesel:1.60, name:'Spanien' },
        pl: { super95:1.55, e10:1.52, diesel:1.45, name:'Polen' },
        nl: { super95:1.88, e10:1.85, diesel:1.70, name:'Niederlande' },
        be: { super95:1.82, e10:1.79, diesel:1.67, name:'Belgien' },
        cz: { super95:1.68, e10:1.65, diesel:1.55, name:'Tschechien' },
        sk: { super95:1.62, e10:1.59, diesel:1.52, name:'Slowakei' },
        hu: { super95:1.70, e10:1.67, diesel:1.58, name:'Ungarn' },
        si: { super95:1.68, e10:1.65, diesel:1.57, name:'Slowenien' },
        hr: { super95:1.65, e10:1.62, diesel:1.54, name:'Kroatien' },
        rs: { super95:1.45, e10:1.42, diesel:1.38, name:'Serbien' },
        ba: { super95:1.42, e10:1.39, diesel:1.35, name:'Bosnien' },
        me: { super95:1.48, e10:1.45, diesel:1.40, name:'Montenegro' },
        mk: { super95:1.40, e10:1.37, diesel:1.33, name:'Nordmazedonien' },
        al: { super95:1.52, e10:1.49, diesel:1.43, name:'Albanien' },
        bg: { super95:1.38, e10:1.35, diesel:1.30, name:'Bulgarien' },
        ro: { super95:1.50, e10:1.47, diesel:1.42, name:'Rum√§nien' },
        gr: { super95:1.88, e10:1.85, diesel:1.72, name:'Griechenland' },
        tr: { super95:1.20, e10:1.17, diesel:1.15, name:'T√ºrkei' },
        ru: { super95:0.65, e10:0.63, diesel:0.68, name:'Russland' },
        by: { super95:0.85, e10:0.82, diesel:0.88, name:'Belarus' },
        ua: { super95:1.15, e10:1.12, diesel:1.18, name:'Ukraine' },
        lt: { super95:1.58, e10:1.55, diesel:1.48, name:'Litauen' },
        lv: { super95:1.62, e10:1.59, diesel:1.52, name:'Lettland' },
        ee: { super95:1.68, e10:1.65, diesel:1.57, name:'Estland' },
        fi: { super95:1.92, e10:1.89, diesel:1.78, name:'Finnland' },
        se: { super95:1.95, e10:1.92, diesel:1.85, name:'Schweden' },
        no: { super95:2.10, e10:2.07, diesel:1.95, name:'Norwegen' },
        dk: { super95:2.05, e10:2.02, diesel:1.88, name:'D√§nemark' },
        pt: { super95:1.82, e10:1.79, diesel:1.68, name:'Portugal' },
        us: { super95:0.95, e10:0.92, diesel:1.00, name:'USA' },
        uk: { super95:1.75, e10:1.72, diesel:1.65, name:'Gro√übritannien' },
        gb: { super95:1.75, e10:1.72, diesel:1.65, name:'Gro√übritannien' },
        au: { super95:1.95, e10:1.92, diesel:1.85, name:'Australien' },
      };

      // Country name mappings
      const countryNameMap = {
        'germany': 'de', 'deutschland': 'de', 'de': 'de',
        'austria': 'at', '√∂sterreich': 'at', 'oesterreich': 'at', 'at': 'at',
        'switzerland': 'ch', 'schweiz': 'ch', 'suisse': 'ch', 'svizzera': 'ch', 'ch': 'ch',
        'france': 'fr', 'frankreich': 'fr', 'fr': 'fr',
        'italy': 'it', 'italien': 'it', 'italia': 'it', 'it': 'it',
        'spain': 'es', 'spanien': 'es', 'espa√±a': 'es', 'es': 'es',
        'poland': 'pl', 'polen': 'pl', 'polska': 'pl', 'pl': 'pl',
        'netherlands': 'nl', 'niederlande': 'nl', 'holland': 'nl', 'nl': 'nl',
        'belgium': 'be', 'belgien': 'be', 'belgique': 'be', 'belgi√´': 'be', 'be': 'be',
        'czech': 'cz', 'czechia': 'cz', 'tschechien': 'cz', 'ƒçesko': 'cz', 'cz': 'cz',
        'slovakia': 'sk', 'slowakei': 'sk', 'slovensko': 'sk', 'sk': 'sk',
        'hungary': 'hu', 'ungarn': 'hu', 'magyarorsz√°g': 'hu', 'hu': 'hu',
        'slovenia': 'si', 'slowenien': 'si', 'slovenija': 'si', 'si': 'si',
        'croatia': 'hr', 'kroatien': 'hr', 'hrvatska': 'hr', 'hr': 'hr',
        'serbia': 'rs', 'serbien': 'rs', 'srbija': 'rs', 'rs': 'rs',
        'bosnia': 'ba', 'bosnien': 'ba', 'ba': 'ba',
        'montenegro': 'me', 'me': 'me',
        'macedonia': 'mk', 'nordmazedonien': 'mk', 'mk': 'mk',
        'albania': 'al', 'albanien': 'al', 'shqip√´ri': 'al', 'al': 'al',
        'bulgaria': 'bg', 'bulgarien': 'bg', '–±—ä–ª–≥–∞—Ä–∏—è': 'bg', 'bg': 'bg',
        'romania': 'ro', 'rum√§nien': 'ro', 'rom√¢nia': 'ro', 'ro': 'ro',
        'greece': 'gr', 'griechenland': 'gr', 'ŒµŒªŒªŒ¨Œ¥Œ±': 'gr', 'gr': 'gr',
        'turkey': 'tr', 't√ºrkei': 'tr', 't√ºrkiye': 'tr', 'tr': 'tr',
        'russia': 'ru', 'russland': 'ru', '—Ä–æ—Å—Å–∏—è': 'ru', 'ru': 'ru',
        'belarus': 'by', 'wei√ürussland': 'by', 'by': 'by',
        'ukraine': 'ua', 'ua': 'ua', '—É–∫—Ä–∞—ó–Ω–∞': 'ua',
        'lithuania': 'lt', 'litauen': 'lt', 'lietuva': 'lt', 'lt': 'lt',
        'latvia': 'lv', 'lettland': 'lv', 'latvija': 'lv', 'lv': 'lv',
        'estonia': 'ee', 'estland': 'ee', 'eesti': 'ee', 'ee': 'ee',
        'finland': 'fi', 'finnland': 'fi', 'suomi': 'fi', 'fi': 'fi',
        'sweden': 'se', 'schweden': 'se', 'sverige': 'se', 'se': 'se',
        'norway': 'no', 'norwegen': 'no', 'norge': 'no', 'no': 'no',
        'denmark': 'dk', 'd√§nemark': 'dk', 'danmark': 'dk', 'dk': 'dk',
        'portugal': 'pt', 'pt': 'pt',
        'united states': 'us', 'usa': 'us', 'us': 'us', 'america': 'us',
        'united kingdom': 'uk', 'uk': 'uk', 'gb': 'uk', 'england': 'uk', 'britain': 'uk', 'gro√übritannien': 'uk',
        'australia': 'au', 'australien': 'au', 'au': 'au',
      };

      // Fallback prices
      let fuelPrices = { super95:1.85, e10:1.82, diesel:1.70 };
      let userEditedPrice = false;

      function renderAvgPrices(){
        avgSuperEl.textContent = fmt(fuelPrices.super95) + ' ‚Ç¨';
        avgE10El.textContent = fmt(fuelPrices.e10) + ' ‚Ç¨';
        avgDieselEl.textContent = fmt(fuelPrices.diesel) + ' ‚Ç¨';
      }
      renderAvgPrices();

      fuelTypeEl.addEventListener('change', () => {
        if(!userEditedPrice) {
          const t = fuelTypeEl.value;
          priceEl.value = fuelPrices[t] || '';
        }
      });

      priceEl.addEventListener('input', () => {
        userEditedPrice = true;
        priceInfoEl.textContent = '';
        priceInfoEl.classList.remove('error');
      });

      function parseCountryFromLocation(locationStr) {
        if(!locationStr || !locationStr.trim()) return null;
        const parts = locationStr.split(',').map(p => p.trim().toLowerCase());
        for(let i = parts.length - 1; i >= 0; i--) {
          const part = parts[i];
          if(countryNameMap[part]) return countryNameMap[part];
        }
        return null;
      }

      function updatePricesFromCountry(countryCode) {
        if(!countryCode || !countryFuelPrices[countryCode]) return false;

        const prices = countryFuelPrices[countryCode];
        fuelPrices = { super95: prices.super95, e10: prices.e10, diesel: prices.diesel };
        renderAvgPrices();

        if(!userEditedPrice) {
          const currentFuel = fuelTypeEl.value;
          priceEl.value = fuelPrices[currentFuel] || '';
          priceInfoEl.textContent = `Standardpreis f√ºr ${prices.name} gesetzt ‚Äì du kannst ihn √§ndern.`;
          priceInfoEl.style.color = 'var(--accent)';
        }
        return true;
      }

      // Detect country from start input
      let locationDebounceTimer = null;
      function detectAndApplyCountryPrice() {
        const location = placeFromEl.value.trim();
        if(!location) return;

        const countryCode = parseCountryFromLocation(location);
        if(countryCode) {
          updatePricesFromCountry(countryCode);
        } else {
          priceInfoEl.textContent = 'Land nicht erkannt ‚Äì bitte Preis manuell eingeben.';
          priceInfoEl.style.color = 'var(--muted)';
        }
      }
      placeFromEl.addEventListener('blur', detectAndApplyCountryPrice);
      placeFromEl.addEventListener('input', () => {
        clearTimeout(locationDebounceTimer);
        locationDebounceTimer = setTimeout(detectAndApplyCountryPrice, 400);
      });

      document.getElementById('btn-reset-price').addEventListener('click', () => {
        userEditedPrice = false;
        const location = placeFromEl.value.trim();
        if(location) {
          const countryCode = parseCountryFromLocation(location);
          if(countryCode && updatePricesFromCountry(countryCode)) return;
        }
        priceEl.value = fuelPrices[fuelTypeEl.value] || '';
        priceInfoEl.textContent = 'Standardpreis wiederhergestellt.';
        priceInfoEl.style.color = 'var(--accent)';
      });

      // Map
      const map = L.map('map', { attributionControl: true }).setView([51.1657, 10.4515], 5);
      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        maxZoom:19,
        attribution:'&copy; OpenStreetMap contributors'
      }).addTo(map);

      let markers = [];
      function clearMarkers(){ markers.forEach(m=>map.removeLayer(m)); markers = []; }
      function addMarker(lat, lon, label){
        const m = L.marker([lat, lon]).addTo(map).bindPopup(label||'');
        markers.push(m);
        return m;
      }

      function haversineKm(lat1, lon1, lat2, lon2){
        const R = 6371;
        const toRad = d => d * Math.PI / 180;
        const dLat = toRad(lat2 - lat1);
        const dLon = toRad(lon2 - lon1);
        const a = Math.sin(dLat/2)**2 + Math.cos(toRad(lat1)) * Math.cos(toRad(lat2)) * Math.sin(dLon/2)**2;
        const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
        return R * c;
      }

      async function geocode(q){
        if(MAPBOX_API_KEY){
          try{
            const url = `https://api.mapbox.com/geocoding/v5/mapbox.places/${encodeURIComponent(q)}.json?access_token=${encodeURIComponent(MAPBOX_API_KEY)}&limit=1&language=de`;
            const res = await fetch(url);
            if(res.ok){
              const data = await res.json();
              if(data?.features?.length){
                const f = data.features[0];
                return { lat: f.center[1], lon: f.center[0], name: f.place_name };
              }
            }
          }catch(e){}
        }
        const url = 'https://nominatim.openstreetmap.org/search?format=json&limit=1&q=' + encodeURIComponent(q);
        const res = await fetch(url, { headers:{ 'Accept-Language':'de' }});
        if(!res.ok) throw new Error('Geocoding failed');
        const data = await res.json();
        if(data?.length) return { lat:+data[0].lat, lon:+data[0].lon, name:data[0].display_name };
        return null;
      }

      // Maut pro 100 km (Durchschnittswerte)
      const tollPer100km = {
        de:0, at:9.2, ch:40, fr:8, it:7, es:10, pl:2, cz:13, sk:10, hu:15, si:15, hr:5, pt:8,
        be:0, nl:0, dk:0, no:5, se:3, by:3, ru:2, ua:1, lt:0, lv:0, ee:0, bg:5, ro:3, rs:5, mk:2, al:3, ba:3, me:2, tr:4, gr:3
      };

      async function estimateTollsMultiCountry(pointA, pointB){
        const dist = haversineKm(pointA.lat, pointA.lon, pointB.lat, pointB.lon);
        const samplesCount = Math.min(15, Math.max(5, Math.ceil(dist / 150)));
        const samples = [];
        for(let i=0;i<=samplesCount;i++){
          const t = i / samplesCount;
          samples.push({
            lat: pointA.lat + (pointB.lat - pointA.lat) * t,
            lon: pointA.lon + (pointB.lon - pointA.lon) * t
          });
        }

        const countriesFound = new Set();
        for(const s of samples){
          try{
            const rev = await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${s.lat}&lon=${s.lon}`);
            if(rev.ok){
              const j = await rev.json();
              const cc = j?.address?.country_code ? String(j.address.country_code).toLowerCase() : null;
              if(cc) countriesFound.add(cc);
            }
          }catch(e){}
          await new Promise(r => setTimeout(r, 250));
        }

        const countries = Array.from(countriesFound);
        const segmentKm = dist / Math.max(1, countries.length);
        let totalToll = 0;
        const breakdown = [];
        for(const cc of countries){
          const rate = (tollPer100km[cc] != null) ? tollPer100km[cc] : 3;
          const cost = (segmentKm / 100) * rate;
          totalToll += cost;
          breakdown.push({
            country: cc.toUpperCase(),
            cost: Math.round(cost * 100) / 100
          });
        }

        return {
          totalCost: Math.round(totalToll * 100) / 100,
          countries: breakdown,
          distKm: dist
        };
      }

      let estimatedTollPer100 = 0;

      document.getElementById('btn-geocode').addEventListener('click', async () => {
        const from = placeFromEl.value.trim();
        const to = placeToEl.value.trim();
        if(!from || !to){
          tollInfoEl.textContent = 'Bitte Start und Ziel eingeben.';
          tollInfoEl.classList.add('error');
          return;
        }
        try{
          const a = await geocode(from);
          const b = await geocode(to);
          if(!a || !b){
            tollInfoEl.textContent = 'Ort nicht gefunden. Bitte genauer eingeben.';
            tollInfoEl.classList.add('error');
            return;
          }

          const countryCode = parseCountryFromLocation(from);
          if(countryCode) updatePricesFromCountry(countryCode);

          clearMarkers();
          addMarker(a.lat,a.lon,'Start: '+a.name);
          addMarker(b.lat,b.lon,'Ziel: '+b.name);
          map.fitBounds([[a.lat,a.lon],[b.lat,b.lon]], { padding:[60,60] });

          const dist = haversineKm(a.lat,a.lon,b.lat,b.lon);
          kmEl.value = Math.round(dist*10)/10;

          tollInfoEl.textContent = 'Mautsch√§tzung l√§uft (mehrere L√§nder-Samples) ‚Ä¶';
          tollInfoEl.classList.remove('error');

          const toll = await estimateTollsMultiCountry(a,b);
          if(toll?.distKm > 0){
            estimatedTollPer100 = +(toll.totalCost / toll.distKm * 100).toFixed(2);
            const breakdown = toll.countries.map(c => `${c.country}: ${fmt(c.cost)} ‚Ç¨`).join(', ');
            tollInfoEl.textContent = `Maut (gesch√§tzt): ${fmt(toll.totalCost)} ‚Ç¨ insgesamt ‚Äî L√§nder: ${breakdown} ‚Äî ca. ${fmt(estimatedTollPer100)} ‚Ç¨ /100 km`;
          } else {
            estimatedTollPer100 = 0;
            tollInfoEl.textContent = 'Keine Maut-Sch√§tzung m√∂glich.';
          }
        }catch(e){
          tollInfoEl.textContent = 'Fehler bei Geocoding oder Mautsch√§tzung. Pr√ºfe Verbindung.';
          tollInfoEl.classList.add('error');
        }
      });

      document.getElementById('btn-clearmap').addEventListener('click', () => {
        clearMarkers();
        map.setView([51.1657,10.4515],5);
        placeFromEl.value='';
        placeToEl.value='';
        tollInfoEl.textContent = '';
        tollInfoEl.classList.remove('error');
        estimatedTollPer100 = 0;
      });

      document.getElementById('km-inc').addEventListener('click', ()=>{ const cur = parse(kmEl.value)||0; kmEl.value = Math.round((cur+1)*10)/10; });
      document.getElementById('km-dec').addEventListener('click', ()=>{ const cur = parse(kmEl.value)||0; kmEl.value = Math.max(0, Math.round((cur-1)*10)/10); });

      function estimateRunningPer100(consumptionL100){
        if(!Number.isFinite(consumptionL100) || consumptionL100 <= 0) return 8.0;
        const est = 0.9 * consumptionL100 + 2.5;
        return Math.max(3, Math.min(20, Math.round(est * 10) / 10));
      }

      document.getElementById('calc-sprit').addEventListener('click', () => {
        const km = parse(kmEl.value);
        const v = parse(verbEl.value);
        let p = parse(priceEl.value);
        const persons = Math.max(1, Math.floor(parse(personsEl.value) || 1));

        if(!Number.isFinite(p)){
          p = (fuelPrices[fuelTypeEl.value] ?? NaN);
        }

        if(Number.isNaN(km) || km <= 0 || Number.isNaN(v) || Number.isNaN(p)){
          priceInfoEl.textContent = 'Bitte Entfernung, Verbrauch und Preis korrekt eingeben.';
          priceInfoEl.style.color = '#e53e3e';
          return;
        }
        priceInfoEl.textContent = '';

        const liters = (km * v) / 100;
        const costFuel = liters * p;

        const runningPer100Base = estimateRunningPer100(v);
        const runningPer100Total = runningPer100Base + (estimatedTollPer100 || 0);

        const costRunning = (km * runningPer100Total) / 100;
        const total = costFuel + costRunning;
        const perPerson = total / persons;
        const avgPer100 = (total / km) * 100;

        litersEl.textContent = fmt(liters) + ' L';
        costFuelEl.textContent = fmt(costFuel) + ' ‚Ç¨';
        costRunningEl.textContent = fmt(costRunning) + ' ‚Ç¨';
        costTotalEl.textContent = fmt(total) + ' ‚Ç¨';
        costPersonEl.textContent = fmt(perPerson) + ' ‚Ç¨';
        avg100El.textContent = fmt(avgPer100) + ' ‚Ç¨ /100km';
        runningEstEl.textContent = fmt(runningPer100Total) + ' ‚Ç¨ /100km';
      });

      document.getElementById('reset-sprit').addEventListener('click', () => {
        kmEl.value = '';
        verbEl.value = '7.5';
        priceEl.value = '';
        personsEl.value = 1;

        litersEl.textContent='0,00 L';
        costFuelEl.textContent='0,00 ‚Ç¨';
        costRunningEl.textContent='0,00 ‚Ç¨';
        costTotalEl.textContent='0,00 ‚Ç¨';
        costPersonEl.textContent='0,00 ‚Ç¨';
        avg100El.textContent='0,00 ‚Ç¨ /100km';
        runningEstEl.textContent='‚Äî ‚Ç¨ /100km';

        tollInfoEl.textContent='';
        tollInfoEl.classList.remove('error');
        estimatedTollPer100 = 0;

        priceInfoEl.textContent = '';
        userEditedPrice = false;

        clearMarkers();
        map.setView([51.1657,10.4515],5);
      });

      // Taschenrechner
      const zahl1 = document.getElementById('zahl1');
      const zahl2 = document.getElementById('zahl2');
      const erg = document.getElementById('erg');
      document.querySelectorAll('[data-op]').forEach(btn =>
        btn.addEventListener('click', () => {
          const a = parse(zahl1.value);
          const b = parse(zahl2.value);
          if(Number.isNaN(a) || Number.isNaN(b)){ erg.textContent = '‚Äì'; return; }
          let res;
          switch(btn.dataset.op){
            case '+': res = a + b; break;
            case '-': res = a - b; break;
            case '*': res = a * b; break;
            case '/': res = (b === 0 ? '‚àû' : a / b); break;
          }
          erg.textContent = (typeof res === 'number') ? fmt(res) : res;
        })
      );
    });
  </script>
</body>
</html>
